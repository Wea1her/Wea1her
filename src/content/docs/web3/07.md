---
title: "07"
description: ""
order: 7
---

#### 一、开发工具

##### 1. 开发工具与Foundry入门

- ![[3fec0a8bfc2d354fa34bfe02a0c45b58_MD5.jpg]]

###### 1）开发工具对比

- ![[f76b5e304c52ce6b64eb3b9c1ea8fa9d_MD5.jpg]]
- Remix IDE特点:
    - 即开即用：无需安装环境，通过网页即可使用
    - 适合场景：新手学习和小型项目快速原型开发
    - 局限性：缺乏工程化管理能力，测试流程难以复现
- 本地IDE优势:
    - 版本控制：完美集成Git等版本管理工具
    - 智能开发：支持代码补全、语法高亮、AI插件等增强功能
    - 工程化支持：适合中大型项目开发和自动化测试流程

###### 2）Foundry核心功能

- ![[7828850f21650b2581f2d870541214eb_MD5.jpg]]
- 全流程支持:
    - 项目生命周期：从初始化到部署的一站式解决方案
    - 典型工作流：包含编译、测试、部署等标准开发环节
- ERC20开发示例:
    - 依赖管理：支持导入Openzeppelin等标准库
    - 账号交互：通过cast工具实现账户管理和合约交互
    - 代码开源：内置支持智能合约开源验证流程

###### 3）工程化实践要点

- 环境优势:
    - 可重复性：测试用例可自动化执行，避免手动操作
    - 版本追溯：所有修改通过版本控制系统记录
- 开发建议:
    - 推荐使用VS Code等现代IDE配合AI插件
    - 测试环节需要单独设计可重复执行的测试案例

##### 2. Foundry入门

﻿

00:17

﻿

###### 1）IDE及插件

﻿

01:43

﻿

- Cursory演示﻿01:56﻿
    - ![[5d81e18e9c9b4bd32e744d454b4c49dd_MD5.jpg]]
    - 推荐工具：Cursor、Claude Code、Gemini Code等AI编辑器
    - 交互方式：
        - 通过快捷键调出AI聊天框（如Command+L）
        - 用自然语言描述需求（如"实现一个Bank合约的存款功能"）
        - AI会生成完整代码（包括deposit方法、事件记录等）
    - 使用技巧：
        - 业务描述：需提供具体业务需求而非笼统指令
        - 代码审查：通过git diff工具检查AI修改内容
        - 迭代开发：可要求AI补充功能（如withdraw方法）
        - 测试支持：可让AI编写测试用例
        - ![[9b291c103b7859361739e3dcd2bd8641_MD5.jpg]]
    - 版本管理：
        - 必须使用git跟踪AI生成的代码变更
        - 通过diff工具确认修改范围（如新增receive方法）
        - 可随时回退不需要的代码修改
- VS Code插件﻿05:53﻿
    - ![[0198ec211039a255c7e2612f024181e7_MD5.jpg]]
    - 必备插件：
        - Solidity Visual Developer：提供代码高亮、函数签名提示
        - Solidity Contract Flattener：合约扁平化工具
    - 插件功能：
        - 可视化继承关系图
        - 智能合约审计辅助
        - 语法错误实时检查

###### 2）开发框架




- ![[8d415511af975b7349fb59887e21dbcb_MD5.jpg]]
- 框架演进：
    - Truffle：最早框架（已淘汰）
    - Hardhat：插件丰富，适合JS开发者
    - Foundry：当前主流，Rust开发，支持：
        - 原生Solidity测试
        - 作弊码(cheatcodes)
        - Fuzz测试
    - ApeWorX：Python系框架（Brownie继任者）
- 选择建议：
    - 新项目推荐Foundry
    - 可与Hardhat共存于同一项目
    - 测试功能特别强大

###### 3）Foundry

﻿

08:10

﻿

- Foundry中文文档介绍﻿09:19﻿
    - ![[36d2eb2d139d549c94cd31d41f86aafb_MD5.jpg]]
    - 工具组成:
        - forge: 管理依赖、编译、运行、测试、部署合约
        - cast: 命令行工具，用于链交互
        - anvil: 启动本地节点
        - chisel: 运行Solidity代码片段
    - 文档资源:
        - 官网: https://getfoundry.sh
        - 英文文档: https://book.getfoundry.sh/
        - 中文文档: https://learnblockchain.cn/docs/foundry/i18n/zh/
- 安装与使用﻿09:46﻿
    - 安装﻿09:55﻿
        - ![[ad41716237e171e2aa1e818768fc3413_MD5.jpg]]
        - 安装命令:
    - 更新方法: 运行foundryup可升级到最新版本
    - Windows限制: 不支持Powershell和Cmd，需通过WSL或Git Bash安装
    - 安装程序: Foundryup是工具链的安装程序，包含forge、cast、anvil和chisel
- forge初始化项目﻿10:29﻿
    - ![[29487228a265ad49f2ce183a5ac648c1_MD5.jpg]]
    - 基本命令:
    - 模板初始化:
    - 默认模板: 包含计数器合约示例代码(Counter.sol)和测试用例
- Foundry项目组织结构﻿11:19﻿
    - ![](https://thumbnail0.baidupcs.com/thumbnail/94afbad80re2a6bfc0cd30d8b9cd17da?chkbd=0&chkv=0&dp-callid=0&dp-logid=493159353547918399&expires=8h&fid=1186958175-250528-630298453771068&ft=image&quality=100&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-mHjqExxbrBfmkhCfHmWJ8RxjmTA%3D&size=c1080_u1080&time=1767596400&vuk=1186958175)
    - 核心目录:
        - cache: forge缓存信息，在forge build后生成
        - lib: 存放依赖库(默认安装forge-std)
        - out: 存放编译输出文件(ABI、字节码等)
        - script: 合约部署脚本
        - src: 合约源代码
        - test: 测试合约代码
    - 配置文件: foundry.toml用于配置项目参数
- 合约编译﻿12:27﻿
    - ![[b6b9bcb84c4f642b0163f04b683ecbc2_MD5.jpg]]
    - 编译命令:
    - 输出内容:
        - 在out目录生成ABI、字节码及编译元信息
        - 可使用forge inspect查看编译产物详细信息
    - 编译产物用途:
        - 字节码用于合约部署
        - ABI用于合约交互
- 合约测试﻿14:16﻿
    - 测试文件命名: 默认以.t.sol结尾(如CounterTest.sol)
    - 测试框架:
        - 导入Test合约: import "forge-std/Test.sol"
        - 继承Test合约获取断言功能
    - 测试结构:
        - setUp(): 每个测试用例运行前的初始化函数(可选)
        - test前缀函数: 作为测试用例运行
        - testFuzz: 模糊测试，参数值由foundry随机抽样
    - 测试命令:
- 合约部署﻿16:49﻿
    - 本地节点准备
        - ![[49b23fc5a00e008e7f3e42d6e1fc29dd_MD5.jpg]]
        - 启动命令:
    - Fork主网:
    - 默认账号: 提供10个测试账号及对应私钥
    - 部署方式
        - ![[844d32013190010430a66052ac7b1790_MD5.jpg]]
        - 方式1: forge create
    - 方式2: forge script
    - 脚本优势: 适合复杂部署场景，可包含初始化逻辑
- 内容小结﻿23:19﻿
    - 完整工作流:
        - forge init: 创建工程
        - forge build: 编译合约
        - forge test: 运行测试
        - anvil: 启动本地节点
        - forge create/script: 部署合约
    - 工具链特点: 全流程覆盖，支持模糊测试和主网状态fork

#### 二、知识小结

|   |   |   |   |
|---|---|---|---|
|知识点|核心内容|考试重点/易混淆点|难度系数|
|Foundry开发框架介绍|从Remix迁移到Foundry的原因及优势，Foundry作为当前最广泛使用的EVM开发框架|Remix与Foundry在工程化管理上的差异|⭐⭐|
|Foundry项目初始化流程|使用forge init创建项目，默认目录结构(src/test/script)和示例合约|项目结构各目录功能区分|⭐⭐|
|智能合约编译部署|forge build编译生成ABI/字节码，forge create和脚本部署两种方式|部署脚本与直接命令的适用场景差异|⭐⭐⭐|
|本地测试链使用|anvil本地节点启动、预置账户和主网状态fork功能|测试网与本地节点部署差异|⭐⭐|
|AI辅助开发工具|Cursor/VS Code等AI编辑器演示，git集成管理AI生成代码|AI代码生成后的验证与版本控制|⭐⭐⭐⭐|
|模糊测试(Fuzz Testing)|通过随机输入值测试边界条件，forge test运行测试用例|常规测试与模糊测试执行机制对比|⭐⭐⭐|
|多框架生态对比|Hardhat(JS友好) vs Foundry(Solidity原生)，Brownie(Python)等替代方案|框架选择的技术决策因素|⭐⭐|
|合约交互实践|通过MetaMask连接本地anvil节点，测试网部署流程演示|水龙头获取测试币的注意事项|⭐⭐⭐|