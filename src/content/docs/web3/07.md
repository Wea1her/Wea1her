---
title: "07"
description: ""
order: 7
---

## 一、开发工具

### 1. 开发工具与 Foundry 入门

![](images/3fec0a8bfc2d354fa34bfe02a0c45b58_MD5%201.jpg)

#### 1）开发工具对比

![](images/f76b5e304c52ce6b64eb3b9c1ea8fa9d_MD5%201.jpg)
- **Remix IDE** 特点：
    - 即开即用：无需安装环境，通过网页即可使用
    - 适合场景：新手学习和小型项目快速原型开发
    - 局限性：缺乏工程化管理能力，测试流程难以复现
- 本地 **IDE** 优势：
    - 版本控制：完美集成 **Git** 等版本管理工具
    - 智能开发：支持代码补全、语法高亮、**AI** 插件等增强功能
    - 工程化支持：适合中大型项目开发和自动化测试流程

#### 2）Foundry 核心功能

![](images/7828850f21650b2581f2d870541214eb_MD5%201.jpg)
- 全流程支持：
    - 项目生命周期：从初始化到部署的一站式解决方案
    - 典型工作流：包含编译、测试、部署等标准开发环节
- **ERC20** 开发示例：
    - 依赖管理：支持导入 **Openzeppelin** 等标准库
    - 账号交互：通过 `cast` 工具实现账户管理和合约交互
    - 代码开源：内置支持智能合约开源验证流程

#### 3）工程化实践要点

- 环境优势：
    - 可重复性：测试用例可自动化执行，避免手动操作
    - 版本追溯：所有修改通过版本控制系统记录
- 开发建议：
    - 推荐使用 **VS Code** 等现代 **IDE** 配合 **AI** 插件
    - 测试环节需要单独设计可重复执行的测试案例

### 2. Foundry 入门

#### 1）IDE 及插件

- **Cursory** 演示
    - ![](images/5d81e18e9c9b4bd32e744d454b4c49dd_MD5%201.jpg)
    - 推荐工具：**Cursor**、**Claude Code**、**Gemini Code** 等 **AI** 编辑器
    - 交互方式：
        - 通过快捷键调出 **AI** 聊天框（如 `Command+L`）
        - 用自然语言描述需求（如“实现一个 **Bank** 合约的存款功能”）
        - **AI** 会生成完整代码（包括 `deposit` 方法、事件记录等）
    - 使用技巧：
        - 业务描述：需提供具体业务需求而非笼统指令
        - 代码审查：通过 `git diff` 工具检查 **AI** 修改内容
        - 迭代开发：可要求 **AI** 补充功能（如 `withdraw` 方法）
        - 测试支持：可让 **AI** 编写测试用例
        - ![](images/9b291c103b7859361739e3dcd2bd8641_MD5%201.jpg)
    - 版本管理：
        - 必须使用 `git` 跟踪 **AI** 生成的代码变更
        - 通过 `diff` 工具确认修改范围（如新增 `receive` 方法）
        - 可随时回退不需要的代码修改
- **VS Code** 插件
    - ![](images/0198ec211039a255c7e2612f024181e7_MD5%201.jpg)
    - 必备插件：
        - **Solidity Visual Developer**：提供代码高亮、函数签名提示
        - **Solidity Contract Flattener**：合约扁平化工具
    - 插件功能：
        - 可视化继承关系图
        - 智能合约审计辅助
        - 语法错误实时检查

#### 2）开发框架

![](images/8d415511af975b7349fb59887e21dbcb_MD5%201.jpg)
- 框架演进：
    - **Truffle**：最早框架（已淘汰）
    - **Hardhat**：插件丰富，适合 **JS** 开发者
    - **Foundry**：当前主流，**Rust** 开发，支持：
        - 原生 **Solidity** 测试
        - 作弊码 (`cheatcodes`)
        - **Fuzz** 测试
    - **ApeWorX**：**Python** 系框架（**Brownie** 继任者）
- 选择建议：
    - 新项目推荐 **Foundry**
    - 可与 **Hardhat** 共存于同一项目
    - 测试功能特别强大

#### 3）Foundry

- **Foundry** 中文文档介绍
    - ![](images/36d2eb2d139d549c94cd31d41f86aafb_MD5%201.jpg)
    - 工具组成：
        - `forge`：管理依赖、编译、运行、测试、部署合约
        - `cast`：命令行工具，用于链交互
        - `anvil`：启动本地节点
        - `chisel`：运行 **Solidity** 代码片段
    - 文档资源：
        - 官网：https://getfoundry.sh
        - 英文文档：https://book.getfoundry.sh/
        - 中文文档：https://learnblockchain.cn/docs/foundry/i18n/zh/
- 安装与使用
    - 安装
        - ![](images/ad41716237e171e2aa1e818768fc3413_MD5%201.jpg)
        - 安装命令：
    - 更新方法：运行 `foundryup` 可升级到最新版本
    - **Windows** 限制：不支持 **Powershell** 和 **Cmd**，需通过 **WSL** 或 **Git Bash** 安装
    - 安装程序：**Foundryup** 是工具链的安装程序，包含 `forge`、`cast`、`anvil` 和 `chisel`
- `forge` 初始化项目
    - ![](images/29487228a265ad49f2ce183a5ac648c1_MD5%201.jpg)
    - 基本命令：
    - 模板初始化：
    - 默认模板：包含计数器合约示例代码 (`Counter.sol`) 和测试用例
- **Foundry** 项目组织结构
    - ![](https://thumbnail0.baidupcs.com/thumbnail/94afbad80re2a6bfc0cd30d8b9cd17da?chkbd=0&chkv=0&dp-callid=0&dp-logid=493159353547918399&expires=8h&fid=1186958175-250528-630298453771068&ft=image&quality=100&rt=pr&sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-mHjqExxbrBfmkhCfHmWJ8RxjmTA%3D&size=c1080_u1080&time=1767596400&vuk=1186958175)
    - 核心目录：
        - `cache`：`forge` 缓存信息，在 `forge build` 后生成
        - `lib`：存放依赖库（默认安装 `forge-std`）
        - `out`：存放编译输出文件（**ABI**、字节码等）
        - `script`：合约部署脚本
        - `src`：合约源代码
        - `test`：测试合约代码
    - 配置文件：`foundry.toml` 用于配置项目参数
- 合约编译
    - ![](images/b6b9bcb84c4f642b0163f04b683ecbc2_MD5%201.jpg)
    - 编译命令：
    - 输出内容：
        - 在 `out` 目录生成 **ABI**、字节码及编译元信息
        - 可使用 `forge inspect` 查看编译产物详细信息
    - 编译产物用途：
        - 字节码用于合约部署
        - **ABI** 用于合约交互
- 合约测试
    - 测试文件命名：默认以 `.t.sol` 结尾（如 `CounterTest.sol`）
    - 测试框架：
        - 导入 **Test** 合约：`import "forge-std/Test.sol"`
        - 继承 **Test** 合约获取断言功能
    - 测试结构：
        - `setUp()`：每个测试用例运行前的初始化函数（可选）
        - `test` 前缀函数：作为测试用例运行
        - `testFuzz`：模糊测试，参数值由 `foundry` 随机抽样
    - 测试命令：
- 合约部署
    - 本地节点准备
        - ![](images/49b23fc5a00e008e7f3e42d6e1fc29dd_MD5%201.jpg)
        - 启动命令：
    - **Fork** 主网：
    - 默认账号：提供 10 个测试账号及对应私钥
    - 部署方式
        - ![](images/844d32013190010430a66052ac7b1790_MD5%201.jpg)
        - 方式 1：`forge create`
    - 方式 2：`forge script`
    - 脚本优势：适合复杂部署场景，可包含初始化逻辑
- 内容小结
    - 完整工作流：
        - `forge init`：创建工程
        - `forge build`：编译合约
        - `forge test`：运行测试
        - `anvil`：启动本地节点
        - `forge create/script`：部署合约
    - 工具链特点：全流程覆盖，支持模糊测试和主网状态 **fork**

## 二、知识小结

|   |   |   |   |
|---|---|---|---|
|知识点|核心内容|考试重点/易混淆点|难度系数|
|**Foundry** 开发框架介绍|从 **Remix** 迁移到 **Foundry** 的原因及优势，**Foundry** 作为当前最广泛使用的 **EVM** 开发框架|**Remix** 与 **Foundry** 在工程化管理上的差异|⭐⭐|
|**Foundry** 项目初始化流程|使用 `forge init` 创建项目，默认目录结构 (`src`/`test`/`script`) 和示例合约|项目结构各目录功能区分|⭐⭐|
|智能合约编译部署|`forge build` 编译生成 **ABI**/字节码，`forge create` 和脚本部署两种方式|部署脚本与直接命令的适用场景差异|⭐⭐⭐|
|本地测试链使用|`anvil` 本地节点启动、预置账户和主网状态 **fork** 功能|测试网与本地节点部署差异|⭐⭐|
|**AI** 辅助开发工具|**Cursor**/**VS Code** 等 **AI** 编辑器演示，`git` 集成管理 **AI** 生成代码|**AI** 代码生成后的验证与版本控制|⭐⭐⭐⭐|
|模糊测试 (**Fuzz Testing**)|通过随机输入值测试边界条件，`forge test` 运行测试用例|常规测试与模糊测试执行机制对比|⭐⭐⭐|
|多框架生态对比|**Hardhat** (**JS** 友好) vs **Foundry** (**Solidity** 原生)，**Brownie** (**Python**) 等替代方案|框架选择的技术决策因素|⭐⭐|
|合约交互实践|通过 **MetaMask** 连接本地 `anvil` 节点，测试网部署流程演示|水龙头获取测试币的注意事项|⭐⭐⭐|