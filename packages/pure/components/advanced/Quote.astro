---
/**
 * 功能说明：本地随机语录组件
 * 每次访问页面时从预设的语录列表中随机选择一条显示
 */
import { Image } from 'astro:assets'
import { cn } from '../../utils'
import quoteIcon from '/src/assets/quote/TheDreamer.png'

const { class: className } = Astro.props
---

<!-- 用于显示本地随机语录 -->

<quote-component class={cn('not-prose inline-block', className)}>
  <!-- 引用显示容器：圆角边框、阴影效果、横向布局 -->
  <div class='flex flex-row items-center gap-x-3 rounded-full border px-4 py-2 text-sm shadow-sm'>
    <!-- 语录图标 -->
    <Image src={quoteIcon} alt='Quote' class='size-5 rounded-full' />
    <!-- 引用文本显示区域 -->
    <p id='quote-sentence' class='font-medium text-muted-foreground'>Loading...</p>
  </div>
</quote-component>

<script>
  // 本地语录列表，可自行添加或修改
  const quotes = [
  '没有最完美的选择，缘分自有它的原则。',
  '我爱故我在。',
  '生命中有万事的可能。',
  '也许是天气，也许是运气，也许是因为有人不放弃。',
  '从来微风都靠树枝摇摆，从来种子都靠春泥破开。',
  '相聚离开，都有时候，没有什么会永垂不朽。',
  '青春是一个梦，人生如一阵春风。',
  '一辈子最怕闯过一种祸，是不是蹉跎。',
  '春风一吹想起谁。',
  '生命的起伏要认可。',
  '没有最完美的选择，缘分自有它的原则。',
  '回忆把我们留了下来。',
  '雪花白永远都渴望看桃花开。',
  '有时候转一个弯的幸福，才是最真的幸福。',
  '上一次看，才二十三。',
  '有机有机有机有机有机蔬菜好。',
  '有些花会晚开，有些人要等待。',
  '这世界黑白灰色，什么样子才是对的。',
  '简单最浪漫。',
  '二泉映月，他才不管红与不红。',
  ]

  // 定义 Quote 自定义元素类
  class Quote extends HTMLElement {
    constructor() {
      super()
    }

    // 组件挂载时随机选择一条语录显示
    connectedCallback() {
      const quoteEl = this.querySelector('#quote-sentence') as HTMLElement
      if (!quoteEl) return
      // 随机选择一条语录
      const randomQuote = quotes[Math.floor(Math.random() * quotes.length)]
      quoteEl.innerText = randomQuote
    }
  }

  // 注册自定义元素
  customElements.define('quote-component', Quote)
</script>
